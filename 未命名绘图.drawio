<mxfile host="app.diagrams.net" modified="2025-04-03T03:10:32.907Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36" etag="L1XImZgLmcN8WHm25ZKW" version="24.5.5" type="github">
  <diagram name="第 1 页" id="oT_q3OuHe1ZKKZc55NS_">
    <mxGraphModel dx="1242" dy="785" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-1" value="开始: 接收统一下单请求" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="80" y="20" width="186" height="34" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-2" value="参数校验" style="rhombus;strokeWidth=2;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="116" y="104" width="113" height="113" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-3" value="抛出参数异常" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="20" y="356" width="111" height="34" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-4" value="检查订单是否存在" style="rhombus;strokeWidth=2;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="181" y="285" width="177" height="177" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-5" value="验证旧订单状态及配置" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="170" y="613" width="175" height="34" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-6" value="生成新支付订单" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="403" y="530" width="127" height="34" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-7" value="更新订单支付方式/渠道" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="166" y="697" width="183" height="34" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-8" value="保存新订单" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="419" y="613" width="95" height="34" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-9" value="发送关闭订单MQ" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="399" y="697" width="134" height="34" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-10" value="获取商户配置" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="214" y="780" width="111" height="34" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-11" value="配置有效性检查" style="rhombus;strokeWidth=2;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="189" y="864" width="161" height="161" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-12" value="抛出配置异常" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="206" y="1093" width="111" height="34" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-13" value="生成交易流水号" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="367" y="1093" width="127" height="34" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-14" value="保存交易记录" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="375" y="1176" width="111" height="34" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-15" value="调用支付渠道接口" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="359" y="1260" width="143" height="34" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-16" value="处理渠道响应" style="rhombus;strokeWidth=2;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="358" y="1343" width="145" height="145" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-17" value="更新订单为成功状态" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="73" y="1556" width="159" height="34" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-18" value="更新为支付中状态" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="282" y="1556" width="143" height="34" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-19" value="更新为失败状态" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="475" y="1556" width="127" height="34" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-20" value="返回支付结果" style="whiteSpace=wrap;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="314" y="1700" width="111" height="34" as="geometry" />
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-21" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5;exitY=0.99;entryX=0.5;entryY=0;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-1" target="Yy-m_EOVeZdOCNcgsrSR-2">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-22" value="校验失败" style="curved=1;startArrow=none;endArrow=block;exitX=0;exitY=0.96;entryX=0.5;entryY=0;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-2" target="Yy-m_EOVeZdOCNcgsrSR-3">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="76" y="250" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-23" value="校验通过" style="curved=1;startArrow=none;endArrow=block;exitX=1;exitY=0.96;entryX=0.5;entryY=0;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-2" target="Yy-m_EOVeZdOCNcgsrSR-4">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="269" y="250" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-24" value="存在订单" style="curved=1;startArrow=none;endArrow=block;exitX=0.45;exitY=0.99;entryX=0.5;entryY=0;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-4" target="Yy-m_EOVeZdOCNcgsrSR-5">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="257" y="495" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-25" value="新订单" style="curved=1;startArrow=none;endArrow=block;exitX=1;exitY=0.81;entryX=0.5;entryY=-0.01;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-4" target="Yy-m_EOVeZdOCNcgsrSR-6">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="466" y="495" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-26" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5;exitY=0.99;entryX=0.5;entryY=-0.01;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-5" target="Yy-m_EOVeZdOCNcgsrSR-7">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-27" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5;exitY=0.97;entryX=0.5;entryY=0;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-6" target="Yy-m_EOVeZdOCNcgsrSR-8">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-28" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5;exitY=0.99;entryX=0.5;entryY=-0.01;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-8" target="Yy-m_EOVeZdOCNcgsrSR-9">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-29" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5;exitY=0.97;entryX=0.45;entryY=0;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-7" target="Yy-m_EOVeZdOCNcgsrSR-10">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="257" y="755" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-30" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5;exitY=0.97;entryX=1;entryY=0.15;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-9" target="Yy-m_EOVeZdOCNcgsrSR-10">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="466" y="755" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-31" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5;exitY=0.99;entryX=0.5;entryY=0;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-10" target="Yy-m_EOVeZdOCNcgsrSR-11">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-32" value="无效" style="curved=1;startArrow=none;endArrow=block;exitX=0.47;exitY=0.99;entryX=0.5;entryY=-0.01;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-11" target="Yy-m_EOVeZdOCNcgsrSR-12">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="262" y="1058" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-33" value="有效" style="curved=1;startArrow=none;endArrow=block;exitX=1;exitY=0.85;entryX=0.5;entryY=-0.01;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-11" target="Yy-m_EOVeZdOCNcgsrSR-13">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="431" y="1058" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-34" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5;exitY=0.97;entryX=0.5;entryY=0;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-13" target="Yy-m_EOVeZdOCNcgsrSR-14">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-35" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5;exitY=0.99;entryX=0.5;entryY=-0.01;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-14" target="Yy-m_EOVeZdOCNcgsrSR-15">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-36" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5;exitY=0.97;entryX=0.5;entryY=0;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-15" target="Yy-m_EOVeZdOCNcgsrSR-16">
          <mxGeometry relative="1" as="geometry">
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-37" value="支付成功" style="curved=1;startArrow=none;endArrow=block;exitX=0;exitY=0.69;entryX=0.5;entryY=0;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-16" target="Yy-m_EOVeZdOCNcgsrSR-17">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="153" y="1522" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-38" value="支付处理中" style="curved=1;startArrow=none;endArrow=block;exitX=0.14;exitY=1;entryX=0.5;entryY=0;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-16" target="Yy-m_EOVeZdOCNcgsrSR-18">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="354" y="1522" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-39" value="支付失败" style="curved=1;startArrow=none;endArrow=block;exitX=1;exitY=0.99;entryX=0.5;entryY=0;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-16" target="Yy-m_EOVeZdOCNcgsrSR-19">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="539" y="1522" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-40" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5;exitY=0.99;entryX=0;entryY=0.16;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-17" target="Yy-m_EOVeZdOCNcgsrSR-20">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="153" y="1615" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-41" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5;exitY=0.99;entryX=0.44;entryY=-0.01;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-18" target="Yy-m_EOVeZdOCNcgsrSR-20">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="354" y="1615" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Yy-m_EOVeZdOCNcgsrSR-42" value="" style="curved=1;startArrow=none;endArrow=block;exitX=0.5;exitY=0.99;entryX=1;entryY=0.08;rounded=0;" edge="1" parent="1" source="Yy-m_EOVeZdOCNcgsrSR-19" target="Yy-m_EOVeZdOCNcgsrSR-20">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="539" y="1615" />
            </Array>
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
